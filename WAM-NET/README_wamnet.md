# WAM NET 障害福祉サービス事業所データ ダウンローダー

## 概要

このスクリプトは、WAM NETから障害福祉サービス事業所のオープンデータを
一括ダウンロードし、北九州市近郊のデータを抽出します。

## 機能

1. **27種類のサービスデータを自動ダウンロード**
2. **北九州市近郊（39市区町村）のデータを抽出**
3. **全サービスを1つのCSVに統合**
4. **Neo4jインポート用データを生成**

## 対象地域

- 北九州市（7区）
- 中間市、直方市、飯塚市、田川市、行橋市、豊前市 など
- 遠賀郡、鞍手郡、嘉穂郡、田川郡、京都郡、築上郡

## 実行方法

### 1. 必要なライブラリをインストール

```bash
cd ~/AI-Workspace
uv init wamnet-project  # 新規プロジェクト作成（オプション）
cd wamnet-project
uv add requests pandas
```

または既存の環境で：

```bash
uv pip install requests pandas
```

### 2. スクリプトを配置

ダウンロードした `wamnet_downloader.py` を作業フォルダに配置します。

```bash
mv ~/Downloads/wamnet_downloader.py ~/AI-Workspace/
cd ~/AI-Workspace
```

### 3. 実行

```bash
uv run python wamnet_downloader.py
```

### 4. 出力結果

実行後、`wamnet_data/` フォルダに以下が生成されます：

```
wamnet_data/
├── kitakyushu_services_202509.csv  # 北九州市近郊の全サービス統合データ
├── neo4j_import_202509.csv          # Neo4jインポート用
└── raw/                              # サービス種類別の個別CSV
    ├── 11_居宅介護.csv
    ├── 22_生活介護.csv
    ├── 46_就労継続支援B型.csv
    └── ...
```

## 出力データの内容

統合CSVには以下の情報が含まれます：

- 事業所番号
- 事業所名
- 法人名
- 住所
- 電話番号
- サービス種類
- 定員
- 営業時間
- など（WAM NETの公開項目に準拠）

## Neo4jへのインポート

生成された `neo4j_import_202509.csv` を使って、Neo4jにインポートできます。
詳細なインポートスクリプトは、データの列構造を確認後に作成します。

## カスタマイズ

### 対象地域の変更

`wamnet_downloader.py` 内の `KITAKYUSHU_AREA_CODES` を編集して、
対象の市区町村コードを追加・削除できます。

### データ公開時点の変更

`DATA_PERIOD` を変更することで、過去のデータも取得できます：
- `202509` - 2025年9月末
- `202503` - 2025年3月末
- `202409` - 2024年9月末

## 注意事項

- サーバー負荷軽減のため、各ダウンロード間に0.5秒の待機時間を設けています
- 全データのダウンロードには数分かかります
- データは定期的に更新されるため、最新データが必要な場合は再実行してください

## トラブルシューティング

### エラー: `requests` が見つからない

```bash
uv add requests
```

### エラー: `pandas` が見つからない

```bash
uv add pandas
```

### 文字化けする場合

CSVファイルはUTF-8（BOM付き）で保存されています。
Excelで開く場合は正しく表示されるはずです。
