# デモ実行手順書

## 前日準備

- [ ] Docker Desktop が起動していることを確認
- [ ] `docker-compose up -d neo4j` でデータベース起動
- [ ] `./scripts/backup.sh` でバックアップを取得
- [ ] `uv run python scripts/seed_demo_data.py` でデモデータ投入
- [ ] `uv run streamlit run app.py` で一通りの画面を確認
- [ ] ネットワーク接続確認（Gemini APIアクセスに必要）

## 当日起動

1. Docker Desktop を起動
2. ターミナルで `bash start.command`
3. ブラウザで http://localhost:8501 を開く
4. ダッシュボードに統計が表示されることを確認（クライアント3名以上）

## デモシナリオ

### 1. ダッシュボード（2分）
- 統計カード: クライアント数、支援記録数、期限アラート、禁忌事項数
- 期限アラート帯: 田中大輝さんの療育手帳が15日後に更新期限

### 2. クライアント一覧（3分）
- 3名のプロフィール確認
- 禁忌事項の強調表示（赤: 生命危険、橙: パニック）
- 緊急連絡先の優先順位表示

### 3. 初期登録デモ（5分）
- 「入力例を挿入」ボタンで健太のナラティブを表示
- 「AIで構造化」ボタンでGeminiが自動分類する様子を見せる
- 確認画面で編集可能なことを説明
- **注意**: 登録まで行うとデモデータに追加される

### 4. クイック記録（2分）
- クライアント選択 → 状況入力 → 記録保存の30秒フロー

### 5. SOS通知フロー（2分）
- ブラウザで http://localhost:8000/docs を開く（Swagger UI）
- `/api/sos` に `{"client_id": "山田健太"}` をテスト送信
- レスポンスの `sent_message` に表示されるLINE通知内容を見せる

### 6. エコマップ生成（3分）
- 「可視化」→「エコマップ」を開く
- クライアントを選択し、テンプレートを「全体像エコマップ」に設定
- カテゴリ別データ件数のプレビューを見せる
- 「エコマップ生成」→「.drawioファイルをダウンロード」
- ダウンロードしたファイルを draw.io（https://app.diagrams.net/）で開いて見せる
- テンプレートを「緊急時体制エコマップ」に切り替え、禁忌事項が最優先表示されることを説明

### 7. Claude Desktop連携（デモ可能な場合）
- 「山田健太さんがパニックを起こしたらどうすればいい？」
- 「来月更新が必要な手帳はある？」
- 「山田健太さんのエコマップを作成して」

## トラブルシューティング

| 症状 | 対処 |
|------|------|
| DB接続エラー | `docker-compose restart neo4j` → 30秒待つ |
| Gemini APIエラー | .envのAPIキー確認、ネットワーク確認 |
| データが空 | `uv run python scripts/seed_demo_data.py` で再投入 |
| データ破損 | `bash scripts/restore.sh` で前日バックアップから復元 |
| Streamlitがクラッシュ | `uv run streamlit run app.py` で再起動 |

## デモモード有効化

`.env` に以下を追加するとダッシュボードに「デモ環境」バナーが表示されます:
```
DEMO_MODE=true
```
